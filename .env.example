# Hack for Facts EB Server - .env.example
# Copy this file to `.env` for local development. Never commit real secrets.
# Notes:
# - In development, CORS is permissive and GraphiQL is enabled.
# - In production, CORS requires ALLOWED_ORIGINS; GraphiQL/introspection are disabled.

########################
# Runtime
########################
# Port the Fastify server listens on (default: 3000)
PORT=3000
# Node environment: development | production | test
NODE_ENV=development

########################
# Database (PostgreSQL)
########################
# Connection string (user:pass@host:port/dbname)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/budget_db
# Optional SSL controls (set to true for cloud DBs with SSL)
DB_USE_SSL=false
DB_REJECT_UNAUTHORIZED_SSL=false
# Optional pool/timeouts (numbers are in milliseconds)
# DB_POOL_MAX=10
# DB_POOL_IDLE_MS=10000
# DB_CONNECTION_TIMEOUT_MS=10000
# DB_STATEMENT_TIMEOUT_MS=60000
# DB_IDLE_IN_TX_TIMEOUT_MS=60000

########################
# CORS & Client Deep Links
########################
# Comma-separated list of absolute origins allowed in production.
# Example: "https://app.example.com,https://www.example.com"
# In dev, CORS is permissive; this is mainly for production.
ALLOWED_ORIGINS=http://localhost:5173
# Primary client base URL used to build deep-links returned by the API.
# Either CLIENT_BASE_URL or PUBLIC_CLIENT_BASE_URL can be set; the first non-empty is used.
CLIENT_BASE_URL=http://localhost:5173
# PUBLIC_CLIENT_BASE_URL=

########################
# Rate Limiting
########################
# Default limit per IP within the time window (Fastify rate-limit format for window)
RATE_LIMIT_MAX=300
RATE_LIMIT_WINDOW=1 minute
# Header name for privileged callers and their higher limit
SPECIAL_RATE_LIMIT_HEADER=x-api-key
SPECIAL_RATE_LIMIT_MAX=1200
# Secret value that a privileged caller must send in SPECIAL_RATE_LIMIT_HEADER to get higher limits
# SPECIAL_RATE_LIMIT_KEY=

########################
# Caching
########################
# Enable/disable in-memory caches globally
CACHE_ENABLED=true
# Default TTL for cache entries (ms)
# CACHE_TTL_MS=3600000
# Soft memory cap across caches (bytes)
# CACHE_MAX_SIZE_BYTES=209715200
# Max items per cache
# CACHE_MAX_ITEMS=20000
# Verbose cache logs for diagnostics
# CACHE_DEBUG=false

########################
# LLM Providers (optional)
########################
# Gemini (used when API callers set useGemini=true on /api/filter-generator)
# GEMINI_API_KEY=
# GEMINI_MODEL=gemini-2.5-flash

# OpenAI-compatible provider (default path for /api/filter-generator)
# OPENAI_API_KEY=
# OPENAI_MODEL=gpt-4o-mini
# Custom base URL (e.g., Azure OpenAI or a proxy). Leave empty for api.openai.com
# OPENAI_API_URL=
