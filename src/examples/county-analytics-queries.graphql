# Get county aggregated metrics with filtering and sorting
query GetCountyAggregatedMetrics {
  countyAggregatedMetrics(
    filter: {
      reporting_year: 2023
      reporting_period: "Annual"
      region: "Centru"
    }
    sortBy: [
      { metric: "total_income", direction: DESC }
      { metric: "total_county_population", direction: DESC }
    ]
    limit: 20
  ) {
    nodes {
      county_code
      county_name
      uat_region
      reporting_year
      reporting_period
      total_county_population
      total_income
      total_expense
      budget_balance
      per_capita_income
      per_capita_expense
    }
    pageInfo {
      totalCount
      hasNextPage
      hasPreviousPage
    }
  }
}

# Get county aggregated metrics with multiple years and regions
query GetCountyMetricsMultiYearRegion {
  countyAggregatedMetrics(
    filter: {
      reporting_years: [2021, 2022, 2023]
      reporting_periods: ["Q4", "Annual"]
      regions: ["Nord-Vest", "Centru", "Sud-Est"]
    }
    sortBy: [
      { metric: "reporting_year", direction: DESC }
      { metric: "county_name", direction: ASC }
    ]
    limit: 40
  ) {
    nodes {
      reporting_year
      reporting_period
      county_code
      county_name
      uat_region
      total_county_population
      total_income
      total_expense
      budget_balance
      per_capita_income
      per_capita_expense
    }
    pageInfo {
      totalCount
    }
  }
}

# Get budget metrics for specific counties
query GetSpecificCountiesMetrics {
  countyAggregatedMetrics(
    filter: {
      county_codes: ["CJ", "MS", "BV", "SB"]
      reporting_year: 2023
      reporting_period: "Annual"
    }
    sortBy: [{ metric: "budget_balance", direction: DESC }]
  ) {
    nodes {
      county_code
      county_name
      uat_region
      total_county_population
      total_income
      total_expense
      budget_balance
      per_capita_income
      per_capita_expense
    }
  }
}
