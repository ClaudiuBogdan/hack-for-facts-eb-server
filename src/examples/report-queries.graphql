# Get a single report with budget totals and top spending categories
query GetReportWithAnalytics {
  report(report_id: 1) {
    report_id
    entity_cui
    report_date
    reporting_year
    reporting_period
    entity {
      name
      uat_type
      county_name
    }
    budgetTotals {
      revenue
      expense
      balance
    }
    topFunctionalCodesExpense(limit: 5) {
      functional_code
      functional_name
      total
      percentage
    }
    topFunctionalCodesRevenue(limit: 5) {
      functional_code
      functional_name
      total
      percentage
    }
  }
}

# Get a list of reports with pagination and filtering
query GetReports {
  reports(
    filter: { reporting_year: 2023, reporting_period: "Annual" }
    limit: 10
  ) {
    nodes {
      report_id
      entity_cui
      report_date
      entity {
        name
        county_name
      }
      budgetTotals {
        revenue
        expense
        balance
      }
    }
    pageInfo {
      totalCount
      hasNextPage
    }
  }
}

# Get budget timeline for a specific entity
query GetEntityBudgetTimeline {
  entityBudgetTimeline(cui: "12345678", startYear: 2020, endYear: 2023) {
    report_id
    reporting_year
    reporting_period
    report_date
    budgetTotals {
      revenue
      expense
      balance
    }
  }
}
